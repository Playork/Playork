"use strict";function handleValueChange(e){var r=document.querySelector(".container");r.classList.contains("top-container")||r.classList.add("top-container")}function handleSubmit(e){e.preventDefault(),params.searchTerm=input.value.trim(),params.sroffset="",document.querySelector(".resultsContainer").innerHTML="",loadMore.classList.add("hidden"),document.querySelector(".moreResults p").classList.add("hidden"),fetchResults(params.searchTerm,params.sroffset)}function fetchResults(e,r){if(e.length){var t="https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch="+e+"&prop=info&inprop=url&utf8=&format=json&origin=*&sroffset="+r+"&srlimit=20";document.querySelector(".loading-indicator").classList.remove("hidden"),fetch(t).then(function(e){return e.json()}).then(function(r){if(document.querySelector(".loading-indicator").classList.add("hidden"),r.query.searchinfo.totalhits)return void displayResults(r);displayErrorMessage(e)})}}function displayResults(e){var r=e.query.search;params.sroffset=e.continue?e.continue.sroffset:"";var t=document.querySelector(".resultsContainer");if(r.forEach(function(e){var r="https://en.wikipedia.org/wiki/"+e.title.replace(/ /g,"_");t.insertAdjacentHTML("beforeend","<div class='resultItem'>\n        <h3 class='resultItem-title'>\n          <a href="+r+" target='iframe'>"+e.title+"</a>\n        </h3>\n        <span class='resultItem-link'>"+r+"</span><br>\n        <span class='resultItem-snippet'>"+e.snippet+"</span><br>\n      </div>")}),e.continue)return void loadMore.classList.remove("hidden");document.querySelector(".moreResults p").classList.remove("hidden"),loadMore.classList.add("hidden")}function displayErrorMessage(e){var r=document.querySelector(".resultsContainer");r.innerHTML="",loadMore.classList.add("hidden"),document.querySelector(".moreResults p").classList.add("hidden"),r.insertAdjacentHTML("beforeend","<div class='errorMessage'>\n      <p>Your search - <span class='keyword'>"+e+"</span> - did not match any documents.</p>\n        <li>Make sure that all words are spelled correctly.</li>\n        <li>Try different keywords.</li>\n        <li>Try more general keywords.</li>\n      </p>\n    </div>")}var input=document.querySelector(".searchForm-input"),form=document.querySelector(".searchForm"),loadMore=document.querySelector(".moreResults-button"),params={searchTerm:"",sroffset:""};input.addEventListener("input",handleValueChange),form.addEventListener("submit",handleSubmit),loadMore.addEventListener("click",function(){fetchResults(params.searchTerm,params.sroffset)});